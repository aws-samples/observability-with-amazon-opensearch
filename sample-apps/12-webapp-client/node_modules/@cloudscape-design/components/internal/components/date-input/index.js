import { __assign, __rest } from "tslib";
// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
import { getDaysInMonth } from 'date-fns';
import React from 'react';
import { fireNonCancelableEvent } from '../../events';
import { displayToIso, isoToDisplay, parseDate } from '../../utils/date-time';
import MaskedInput from '../masked-input';
function daysMax(value) {
    // force to first day in month, as new Date('2018-02-30') -> March 2nd 2018
    var baseDate = displayToIso(value).substring(0, 7);
    return getDaysInMonth(parseDate(baseDate));
}
var maskArgs = {
    separator: '/',
    inputSeparators: ['-', '.', ' '],
    segments: [
        { min: 0, max: 9999, "default": 2000, length: 4 },
        { min: 1, max: 12, length: 2 },
        { min: 1, max: daysMax, length: 2 },
    ]
};
var DateInput = React.forwardRef(function (_a, ref) {
    var _b = _a.__internalRootRef, __internalRootRef = _b === void 0 ? null : _b, value = _a.value, onChange = _a.onChange, props = __rest(_a, ["__internalRootRef", "value", "onChange"]);
    return (React.createElement(MaskedInput, __assign({ value: isoToDisplay(value), onChange: function (event) { return fireNonCancelableEvent(onChange, { value: displayToIso(event.detail.value) }); } }, props, { ref: ref, disableBrowserAutocorrect: true, mask: maskArgs, autofix: true, __internalRootRef: __internalRootRef })));
});
export default DateInput;
//# sourceMappingURL=index.js.map