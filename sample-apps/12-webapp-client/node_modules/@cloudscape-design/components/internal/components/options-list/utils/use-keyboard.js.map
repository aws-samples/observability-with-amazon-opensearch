{"version":3,"file":"use-keyboard.js","sourceRoot":"","sources":["../../../../../../src/internal/components/options-list/utils/use-keyboard.ts"],"names":[],"mappings":"AAAA,qEAAqE;AACrE,sCAAsC;AACtC,OAAO,EAAE,WAAW,EAAoB,MAAM,OAAO,CAAC;AACtD,OAAO,EAAE,OAAO,EAAE,MAAM,kBAAkB,CAAC;AAG3C,IAAM,IAAI,GAAG,EAAE,CAAC;AAChB,IAAM,GAAG,GAAG,EAAE,CAAC;AAef,MAAM,CAAC,IAAM,eAAe,GAAoB,UAAC,EAShD;QARC,aAAa,mBAAA,EACb,YAAY,kBAAA,EACZ,MAAM,YAAA,EACN,KAAK,WAAA,EACL,aAAa,mBAAA,EACb,UAAU,gBAAA,EACV,qBAAqB,2BAAA,EACrB,0BAA0B,EAA1B,kBAAkB,mBAAG,KAAK,KAAA;IAE1B,OAAO,WAAW,CAChB,UAAC,CAA6B;QAC5B,UAAU,CAAC,OAAO,GAAG,IAAI,CAAC;QAC1B,QAAQ,CAAC,CAAC,MAAM,CAAC,OAAO,EAAE;YACxB,KAAK,OAAO,CAAC,EAAE;gBACb,CAAC,CAAC,cAAc,EAAE,CAAC;gBACnB,aAAa,CAAC,CAAC,CAAC,CAAC,CAAC;gBAClB,MAAM;YACR,KAAK,OAAO,CAAC,IAAI;gBACf,CAAC,CAAC,cAAc,EAAE,CAAC;gBACnB,aAAa,CAAC,CAAC,CAAC,CAAC;gBACjB,MAAM;YACR,KAAK,IAAI;gBACP,MAAM,EAAE,CAAC;gBACT,MAAM;YACR,KAAK,GAAG;gBACN,KAAK,EAAE,CAAC;gBACR,MAAM;YACR,KAAK,OAAO,CAAC,MAAM;gBACjB,aAAa,EAAE,CAAC;gBAChB,MAAM;YACR,KAAK,OAAO,CAAC,KAAK;gBAChB,CAAC,CAAC,cAAc,EAAE,CAAC;gBACnB,YAAY,EAAE,CAAC;gBACf,MAAM;YACR,KAAK,OAAO,CAAC,KAAK;gBAChB,IAAI,kBAAkB,EAAE;oBACtB,CAAC,CAAC,cAAc,EAAE,CAAC;oBACnB,YAAY,EAAE,CAAC;oBACf,qBAAqB,CAAC,OAAO,GAAG,IAAI,CAAC;iBACtC;SACJ;IACH,CAAC,EACD,CAAC,aAAa,EAAE,YAAY,EAAE,MAAM,EAAE,KAAK,EAAE,aAAa,EAAE,UAAU,EAAE,qBAAqB,EAAE,kBAAkB,CAAC,CACnH,CAAC;AACJ,CAAC,CAAC;AAUF,MAAM,CAAC,IAAM,kBAAkB,GAAuB,UAAC,EAAoC;QAAlC,YAAY,kBAAA,EAAE,MAAM,YAAA,EAAE,UAAU,gBAAA;IACvF,OAAO,WAAW,CAChB,UAAC,CAA6B;QAC5B,UAAU,CAAC,OAAO,GAAG,IAAI,CAAC;QAC1B,QAAQ,CAAC,CAAC,MAAM,CAAC,OAAO,EAAE;YACxB,KAAK,OAAO,CAAC,EAAE,CAAC;YAChB,KAAK,OAAO,CAAC,IAAI;gBACf,CAAC,CAAC,cAAc,EAAE,CAAC;gBACnB,MAAM,EAAE,CAAC;gBACT,YAAY,EAAE,CAAC;gBACf,MAAM;YACR,KAAK,OAAO,CAAC,KAAK;gBAChB,CAAC,CAAC,cAAc,EAAE,CAAC;gBACnB,YAAY,EAAE,CAAC;gBACf,MAAM;SACT;IACH,CAAC,EACD,CAAC,YAAY,EAAE,MAAM,EAAE,UAAU,CAAC,CACnC,CAAC;AACJ,CAAC,CAAC","sourcesContent":["// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { useCallback, MutableRefObject } from 'react';\nimport { KeyCode } from '../../../keycode';\nimport { BaseKeyDetail, CancelableEventHandler } from '../../../events';\n\nconst HOME = 36;\nconst END = 35;\n\ninterface UseMenuKeyboard {\n  (inputProps: {\n    moveHighlight: (direction: -1 | 1, startIndex?: number) => void;\n    selectOption: () => void;\n    goHome: () => void;\n    goEnd: () => void;\n    closeDropdown: () => void;\n    isKeyboard: MutableRefObject<boolean>;\n    isSelectingUsingSpace: MutableRefObject<boolean>;\n    preventNativeSpace?: boolean;\n  }): CancelableEventHandler<BaseKeyDetail>;\n}\n\nexport const useMenuKeyboard: UseMenuKeyboard = ({\n  moveHighlight,\n  selectOption,\n  goHome,\n  goEnd,\n  closeDropdown,\n  isKeyboard,\n  isSelectingUsingSpace,\n  preventNativeSpace = false,\n}) => {\n  return useCallback(\n    (e: CustomEvent<BaseKeyDetail>) => {\n      isKeyboard.current = true;\n      switch (e.detail.keyCode) {\n        case KeyCode.up:\n          e.preventDefault();\n          moveHighlight(-1);\n          break;\n        case KeyCode.down:\n          e.preventDefault();\n          moveHighlight(1);\n          break;\n        case HOME:\n          goHome();\n          break;\n        case END:\n          goEnd();\n          break;\n        case KeyCode.escape:\n          closeDropdown();\n          break;\n        case KeyCode.enter:\n          e.preventDefault();\n          selectOption();\n          break;\n        case KeyCode.space:\n          if (preventNativeSpace) {\n            e.preventDefault();\n            selectOption();\n            isSelectingUsingSpace.current = true;\n          }\n      }\n    },\n    [moveHighlight, selectOption, goHome, goEnd, closeDropdown, isKeyboard, isSelectingUsingSpace, preventNativeSpace]\n  );\n};\n\ninterface UseTriggerKeyboard {\n  (inputProps: {\n    openDropdown: () => void;\n    goHome: () => void;\n    isKeyboard: MutableRefObject<boolean>;\n  }): CancelableEventHandler<BaseKeyDetail>;\n}\n\nexport const useTriggerKeyboard: UseTriggerKeyboard = ({ openDropdown, goHome, isKeyboard }) => {\n  return useCallback(\n    (e: CustomEvent<BaseKeyDetail>) => {\n      isKeyboard.current = true;\n      switch (e.detail.keyCode) {\n        case KeyCode.up:\n        case KeyCode.down:\n          e.preventDefault();\n          goHome();\n          openDropdown();\n          break;\n        case KeyCode.space:\n          e.preventDefault();\n          openDropdown();\n          break;\n      }\n    },\n    [openDropdown, goHome, isKeyboard]\n  );\n};\n"]}