{"version":3,"file":"row.js","sourceRoot":"","sources":["../../../src/attribute-editor/row.tsx"],"names":[],"mappings":";AAAA,qEAAqE;AACrE,sCAAsC;AACtC,OAAO,WAAW,MAAM,iBAAiB,CAAC;AAC1C,OAAO,MAAM,MAAM,iBAAiB,CAAC;AACrC,OAAO,KAAK,EAAE,EAAE,WAAW,EAAE,MAAM,OAAO,CAAC;AAC3C,OAAO,iBAAiB,MAAM,wBAAwB,CAAC;AACvD,OAAO,oBAAgD,MAAM,2BAA2B,CAAC;AAGzF,OAAO,EAAE,sBAAsB,EAA6B,MAAM,oBAAoB,CAAC;AACvF,OAAO,YAAY,MAAM,kBAAkB,CAAC;AAC5C,OAAO,EAAE,cAAc,EAAE,MAAM,oBAAoB,CAAC;AACpD,OAAO,IAAI,MAAM,MAAM,CAAC;AAExB,IAAM,OAAO,GAAG,cAAM,OAAA,oBAAC,WAAW,IAAC,SAAS,EAAE,MAAM,CAAC,OAAO,EAAE,OAAO,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,GAAI,EAAjE,CAAiE,CAAC;AAWxF,IAAM,SAAS,GAAG,UAAC,EAAgD;IAA9C,IAAA,OAAO,aAAA,EAAE,SAAS,eAAA,EAAK,KAAK,cAA9B,wBAAgC,CAAF;IAAuB,OAAA,CACtE,oBAAC,iBAAiB,aAAC,WAAW,EAAE,SAAS,IAAM,KAAK,IAAE,SAAS,EAAE,MAAM,CAAC,KAAK,EAAE,OAAO,EAAE,IAAI,KACzF,OAAO,CACU,CACrB,CAAA;CAAA,CAAC;AAaF,IAAM,eAAe,GAAG,CAAC,EAAE,OAAO,EAAE,EAAE,SAAO,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,CAAC,CAAC;AAC9D,IAAM,yBAAyB,GAAG,CAAC,EAAE,OAAO,EAAE,EAAE,SAAO,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,EAAE,OAAO,EAAE,EAAE,SAAO,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,CAAC,CAAC;AAC7G,MAAM,CAAC,IAAM,GAAG,GAAG,KAAK,CAAC,IAAI,CAC3B,UAAK,EASS;QARZ,UAAU,gBAAA,EACV,IAAI,UAAA,EACJ,UAAU,gBAAA,EACV,KAAK,WAAA,EACL,SAAS,eAAA,EACT,gBAAgB,sBAAA,EAChB,gBAAgB,sBAAA,EAChB,mBAAmB,yBAAA;IAEnB,IAAM,gBAAgB,GAAG,UAAU,KAAK,SAAS,IAAI,UAAU,KAAK,KAAK,CAAC;IAC1E,IAAM,cAAc,GAAG,CAAC,gBAAgB,CAAC;IAEzC,IAAM,iBAAiB,GAAG,WAAW,CAAC;QACpC,sBAAsB,CAAC,mBAAmB,EAAE,EAAE,SAAS,EAAE,KAAK,EAAE,CAAC,CAAC;IACpE,CAAC,EAAE,CAAC,mBAAmB,EAAE,KAAK,CAAC,CAAC,CAAC;IAEjC,IAAM,MAAM,GAAG,UAAC,IAAO,EAAE,SAAiB,EAAE,IAA+D;QACzG,OAAA,OAAO,IAAI,KAAK,UAAU,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,EAAE,SAAS,CAAC,CAAC,CAAC,CAAC,IAAI;IAAzD,CAAyD,CAAC;IAE5D,OAAO,CACL,oBAAC,WAAW,IAAC,SAAS,EAAE,MAAM,CAAC,GAAG,EAAE,MAAM,EAAE,EAAE,MAAM,EAAE,GAAG,EAAE;QACzD,oBAAC,YAAY,IACX,YAAY,EAAE,UAAU,EACxB,cAAc,EAAE,SAAS,CAAC,CAAC,CAAC,yBAAyB,CAAC,CAAC,CAAC,eAAe;YAEvE,oBAAC,oBAAoB,IAAC,SAAS,EAAE,MAAM,CAAC,aAAa,CAAC,EAAE,OAAO,EAAE,UAAU,CAAC,MAAM,EAAE,YAAY,EAAE,UAAU,IACzG,UAAU,CAAC,GAAG,CAAC,UAAC,EAAmD,EAAE,QAAQ;oBAA3D,IAAI,UAAA,EAAE,KAAK,WAAA,EAAE,cAAc,oBAAA,EAAE,SAAS,eAAA,EAAE,OAAO,aAAA;gBAAiB,OAAA,CACjF,oBAAC,SAAS,IACR,GAAG,EAAE,QAAQ,EACb,KAAK,EAAE,KAAK,EACZ,IAAI,EAAE,IAAI,EACV,cAAc,EAAE,cAAc,IAAI,MAAM,CAAC,IAAI,EAAE,KAAK,EAAE,cAAc,CAAC,EACrE,SAAS,EAAE,SAAS,IAAI,MAAM,CAAC,IAAI,EAAE,KAAK,EAAE,SAAS,CAAC,EACtD,OAAO,EAAE,OAAO,IAAI,MAAM,CAAC,IAAI,EAAE,KAAK,EAAE,OAAO,CAAC,EAChD,SAAS,EAAE,cAAc,IAAI,KAAK,GAAG,CAAC,GACtC,CACH;YAVkF,CAUlF,CAAC,CACmB;YACtB,SAAS,IAAI,CACZ,oBAAC,eAAe,IAAC,KAAK,EAAE,KAAK,EAAE,gBAAgB,EAAE,gBAAgB;gBAC/D,oBAAC,cAAc,IACb,SAAS,EAAE,MAAM,CAAC,eAAe,CAAC,EAClC,UAAU,EAAC,MAAM,EACjB,GAAG,EAAE,UAAA,GAAG;wBACN,gBAAgB,CAAC,KAAK,CAAC,GAAG,GAAG,aAAH,GAAG,cAAH,GAAG,GAAI,SAAS,CAAC;oBAC7C,CAAC,EACD,OAAO,EAAE,iBAAiB,IAEzB,gBAAgB,CACF,CACD,CACnB,CACY;QACd,gBAAgB,IAAI,oBAAC,OAAO,OAAG,CACpB,CACf,CAAC;AACJ,CAAC,CACF,CAAC;AAQF,IAAM,eAAe,GAAG,UAAC,EAAsD;;QAApD,KAAK,WAAA,EAAE,QAAQ,cAAA,EAAE,gBAAgB,sBAAA;IAAwB,OAAA,CAClF,6BACE,SAAS,EAAE,IAAI;YACb,GAAC,MAAM,CAAC,kBAAkB,CAAC,IAAG,CAAC,gBAAgB,IAAI,KAAK,KAAK,CAAC;YAC9D,GAAC,MAAM,CAAC,aAAa,CAAC,IAAG,gBAAgB;gBACzC,IAED,QAAQ,CACL,CACP;AATmF,CASnF,CAAC","sourcesContent":["// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport InternalBox from '../box/internal';\nimport styles from './styles.css.js';\nimport React, { useCallback } from 'react';\nimport InternalFormField from '../form-field/internal';\nimport InternalColumnLayout, { ColumnLayoutBreakpoint } from '../column-layout/internal';\nimport { AttributeEditorProps } from './interfaces';\nimport { ButtonProps } from '../button/interfaces';\nimport { fireNonCancelableEvent, NonCancelableEventHandler } from '../internal/events';\nimport InternalGrid from '../grid/internal';\nimport { InternalButton } from '../button/internal';\nimport clsx from 'clsx';\n\nconst Divider = () => <InternalBox className={styles.divider} padding={{ top: 'l' }} />;\n\ninterface AttributeProps {\n  info?: React.ReactNode;\n  label?: React.ReactNode;\n  errorText?: React.ReactNode;\n  control?: React.ReactNode;\n  constraintText?: React.ReactNode;\n  hideLabel?: boolean;\n}\n\nconst Attribute = ({ control, hideLabel, ...props }: AttributeProps) => (\n  <InternalFormField __hideLabel={hideLabel} {...props} className={styles.field} stretch={true}>\n    {control}\n  </InternalFormField>\n);\n\nexport interface RowProps<T> {\n  breakpoint: ColumnLayoutBreakpoint | null;\n  item: T;\n  definition: ReadonlyArray<AttributeEditorProps.FieldDefinition<T>>;\n  index: number;\n  removable: boolean;\n  removeButtonText: string;\n  removeButtonRefs: Array<ButtonProps.Ref | undefined>;\n  onRemoveButtonClick?: NonCancelableEventHandler<AttributeEditorProps.RemoveButtonClickDetail>;\n}\n\nconst GRID_DEFINITION = [{ colspan: { default: 12, xs: 9 } }];\nconst REMOVABLE_GRID_DEFINITION = [{ colspan: { default: 12, xs: 9 } }, { colspan: { default: 12, xs: 3 } }];\nexport const Row = React.memo(\n  <T,>({\n    breakpoint,\n    item,\n    definition,\n    index,\n    removable,\n    removeButtonText,\n    removeButtonRefs,\n    onRemoveButtonClick,\n  }: RowProps<T>) => {\n    const isNarrowViewport = breakpoint === 'default' || breakpoint === 'xxs';\n    const isWideViewport = !isNarrowViewport;\n\n    const handleRemoveClick = useCallback(() => {\n      fireNonCancelableEvent(onRemoveButtonClick, { itemIndex: index });\n    }, [onRemoveButtonClick, index]);\n\n    const render = (item: T, itemIndex: number, slot: AttributeEditorProps.FieldRenderable<T> | React.ReactNode) =>\n      typeof slot === 'function' ? slot(item, itemIndex) : slot;\n\n    return (\n      <InternalBox className={styles.row} margin={{ bottom: 's' }}>\n        <InternalGrid\n          __breakpoint={breakpoint}\n          gridDefinition={removable ? REMOVABLE_GRID_DEFINITION : GRID_DEFINITION}\n        >\n          <InternalColumnLayout className={styles['row-control']} columns={definition.length} __breakpoint={breakpoint}>\n            {definition.map(({ info, label, constraintText, errorText, control }, defIndex) => (\n              <Attribute\n                key={defIndex}\n                label={label}\n                info={info}\n                constraintText={constraintText && render(item, index, constraintText)}\n                errorText={errorText && render(item, index, errorText)}\n                control={control && render(item, index, control)}\n                hideLabel={isWideViewport && index > 0}\n              />\n            ))}\n          </InternalColumnLayout>\n          {removable && (\n            <ButtonContainer index={index} isNarrowViewport={isNarrowViewport}>\n              <InternalButton\n                className={styles['remove-button']}\n                formAction=\"none\"\n                ref={ref => {\n                  removeButtonRefs[index] = ref ?? undefined;\n                }}\n                onClick={handleRemoveClick}\n              >\n                {removeButtonText}\n              </InternalButton>\n            </ButtonContainer>\n          )}\n        </InternalGrid>\n        {isNarrowViewport && <Divider />}\n      </InternalBox>\n    );\n  }\n);\n\ninterface ButtonContainer {\n  index: number;\n  children: React.ReactNode;\n  isNarrowViewport: boolean;\n}\n\nconst ButtonContainer = ({ index, children, isNarrowViewport }: ButtonContainer) => (\n  <div\n    className={clsx({\n      [styles['button-container']]: !isNarrowViewport && index === 0,\n      [styles['right-align']]: isNarrowViewport,\n    })}\n  >\n    {children}\n  </div>\n);\n"]}