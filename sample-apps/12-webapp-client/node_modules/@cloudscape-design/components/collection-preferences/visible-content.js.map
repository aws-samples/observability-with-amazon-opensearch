{"version":3,"file":"visible-content.js","sourceRoot":"","sources":["../../../src/collection-preferences/visible-content.tsx"],"names":[],"mappings":"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","sourcesContent":["// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport React from 'react';\nimport InternalSpaceBetween from '../space-between/internal';\nimport InternalToggle from '../toggle/internal';\nimport { useUniqueId } from '../internal/hooks/use-unique-id';\n\nimport { CollectionPreferencesProps } from './interfaces';\nimport styles from './styles.css.js';\n\nconst isVisible = (id: string, visibleIds: ReadonlyArray<string>) => visibleIds.indexOf(id) !== -1;\n\ninterface ClassNameProps {\n  className: string;\n}\nconst className = (suffix: string): ClassNameProps => ({\n  className: styles[`visible-content-${suffix}`],\n});\n\ninterface VisibleContentPreferenceProps extends CollectionPreferencesProps.VisibleContentPreference {\n  onChange: (value: ReadonlyArray<string>) => void;\n  value?: ReadonlyArray<string>;\n}\n\nexport default function VisibleContentPreference({\n  title,\n  options,\n  value = [],\n  onChange,\n}: VisibleContentPreferenceProps) {\n  const idPrefix = useUniqueId('visible-content');\n\n  const flatOptionsIds = options.reduce<string[]>(\n    (ids, group) => [...ids, ...group.options.reduce<string[]>((groupIds, option) => [...groupIds, option.id], [])],\n    []\n  );\n\n  const onToggle = (id: string) => {\n    if (!isVisible(id, value)) {\n      onChange(\n        [...value, id].sort((firstId, secondId) => flatOptionsIds.indexOf(firstId) - flatOptionsIds.indexOf(secondId))\n      );\n    } else {\n      onChange(value.filter(currentId => currentId !== id));\n    }\n  };\n\n  const selectionOption = (\n    option: CollectionPreferencesProps.VisibleContentOption,\n    optionGroupIndex: number,\n    optionIndex: number\n  ) => {\n    const labelId = `${idPrefix}-${optionGroupIndex}-${optionIndex}`;\n    return (\n      <div key={optionIndex} {...className('option')}>\n        <label {...className('option-label')} htmlFor={labelId}>\n          {option.label}\n        </label>\n        <div {...className('toggle')}>\n          <InternalToggle\n            checked={isVisible(option.id, value)}\n            onChange={() => onToggle(option.id)}\n            disabled={option.editable === false}\n            controlId={labelId}\n          />\n        </div>\n      </div>\n    );\n  };\n\n  const outerGroupLabelId = `${idPrefix}-outer`;\n  return (\n    <div className={styles['visible-content']}>\n      <div {...className('title')} id={outerGroupLabelId}>\n        {title}\n      </div>\n      <InternalSpaceBetween {...className('groups')} size=\"xs\">\n        {options.map((optionGroup, optionGroupIndex) => {\n          const groupLabelId = `${idPrefix}-${optionGroupIndex}`;\n          return (\n            <div\n              key={optionGroupIndex}\n              {...className('group')}\n              role=\"group\"\n              aria-labelledby={`${outerGroupLabelId} ${groupLabelId}`}\n            >\n              <div {...className('group-label')} id={groupLabelId}>\n                {optionGroup.label}\n              </div>\n              <div>\n                {optionGroup.options.map((option, optionIndex) =>\n                  selectionOption(option, optionGroupIndex, optionIndex)\n                )}\n              </div>\n            </div>\n          );\n        })}\n      </InternalSpaceBetween>\n    </div>\n  );\n}\n"]}