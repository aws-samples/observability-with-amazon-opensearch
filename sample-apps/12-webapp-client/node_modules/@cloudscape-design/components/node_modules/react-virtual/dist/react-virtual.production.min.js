!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("react")):"function"==typeof define&&define.amd?define(["exports","react"],t):t((e=e||self).ReactVirtual={},e.React)}(this,(function(e,t){"use strict";function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}t=t&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t;var n,u=["bottom","height","left","right","top","width"],a=new Map,i=function e(){var t=[];a.forEach((function(e,r){var n,a,i=r.getBoundingClientRect();n=i,a=e.rect,void 0===n&&(n={}),void 0===a&&(a={}),u.some((function(e){return n[e]!==a[e]}))&&(e.rect=i,t.push(e))})),t.forEach((function(e){e.callbacks.forEach((function(t){return t(e.rect)}))})),n=window.requestAnimationFrame(e)};var o="undefined"!=typeof window?t.useLayoutEffect:t.useEffect;function c(e,r){void 0===r&&(r={width:0,height:0});var u=t.useState(e.current),c=u[0],f=u[1],l=t.useReducer(s,r),v=l[0],d=l[1],h=t.useRef(!1);return o((function(){e.current!==c&&f(e.current)})),o((function(){if(c&&!h.current){h.current=!0;var e=c.getBoundingClientRect();d({rect:e})}}),[c]),t.useEffect((function(){if(c){var e,t,r=(e=c,t=function(e){d({rect:e})},{observe:function(){var r=0===a.size;a.has(e)?a.get(e).callbacks.push(t):a.set(e,{rect:void 0,hasRectChanged:!1,callbacks:[t]}),r&&i()},unobserve:function(){var r=a.get(e);if(r){var u=r.callbacks.indexOf(t);u>=0&&r.callbacks.splice(u,1),r.callbacks.length||a.delete(e),a.size||cancelAnimationFrame(n)}}});return r.observe(),function(){r.unobserve()}}}),[c]),v}function s(e,t){var r=t.rect;return e.height!==r.height||e.width!==r.width?r:e}var f=function(){return 50},l=function(e){return e},v=function(e,t){return e[t?"offsetWidth":"offsetHeight"]},d=function(e){for(var t=Math.max(e.start-e.overscan,0),r=Math.min(e.end+e.overscan,e.size-1),n=[],u=t;u<=r;u++)n.push(u);return n};e.defaultRangeExtractor=d,e.useVirtual=function(e){var n,u=e.size,a=void 0===u?0:u,i=e.estimateSize,s=void 0===i?f:i,h=e.overscan,p=void 0===h?1:h,m=e.paddingStart,g=void 0===m?0:m,b=e.paddingEnd,y=void 0===b?0:b,z=e.parentRef,O=e.horizontal,k=e.scrollToFn,R=e.useObserver,w=e.initialRect,E=e.onScrollElement,S=e.scrollOffsetFn,x=e.keyExtractor,M=void 0===x?l:x,C=e.measureSize,j=void 0===C?v:C,F=e.rangeExtractor,A=void 0===F?d:F,L=O?"width":"height",T=O?"scrollLeft":"scrollTop",q=t.useRef({scrollOffset:0,measurements:[]}),P=t.useState(0),B=P[0],I=P[1];q.current.scrollOffset=B;var V=(R||c)(z,w)[L];q.current.outerSize=V;var _=t.useCallback((function(e){z.current&&(z.current[T]=e)}),[z,T]),H=k||_;k=t.useCallback((function(e){H(e,_)}),[_,H]);var W=t.useState({}),D=W[0],G=W[1],J=t.useCallback((function(){return G({})}),[]),K=t.useRef([]),N=t.useMemo((function(){var e=K.current.length>0?Math.min.apply(Math,K.current):0;K.current=[];for(var t=q.current.measurements.slice(0,e),r=e;r<a;r++){var n=M(r),u=D[n],i=t[r-1]?t[r-1].end:g,o="number"==typeof u?u:s(r),c=i+o;t[r]={index:r,start:i,size:o,end:c,key:n}}return t}),[s,D,g,a,M]),Q=((null==(n=N[a-1])?void 0:n.end)||g)+y;q.current.measurements=N,q.current.totalSize=Q;var U=E?E.current:z.current,X=t.useRef(S);X.current=S,o((function(){if(U){var e=function(e){var t=X.current?X.current(e):U[T];I(t)};return e(),U.addEventListener("scroll",e,{capture:!1,passive:!0}),function(){U.removeEventListener("scroll",e)}}I(0)}),[U,T]);var Y=function(e){var t=e.measurements,r=e.outerSize,n=e.scrollOffset,u=t.length-1,a=function(e,t,r,n){for(;e<=t;){var u=(e+t)/2|0,a=r(u);if(a<n)e=u+1;else{if(!(a>n))return u;t=u-1}}return e>0?e-1:0}(0,u,(function(e){return t[e].start}),n),i=a;for(;i<u&&t[i].end<n+r;)i++;return{start:a,end:i}}(q.current),Z=Y.start,$=Y.end,ee=t.useMemo((function(){return A({start:Z,end:$,overscan:p,size:N.length})}),[Z,$,p,N.length,A]),te=t.useRef(j);te.current=j;var re=t.useMemo((function(){for(var e=[],t=function(t,n){var u=ee[t],a=r(r({},N[u]),{},{measureRef:function(e){if(e){var t=te.current(e,O);if(t!==a.size){var n=q.current.scrollOffset;a.start<n&&_(n+(t-a.size)),K.current.push(u),G((function(e){var n;return r(r({},e),{},((n={})[a.key]=t,n))}))}}}});e.push(a)},n=0,u=ee.length;n<u;n++)t(n);return e}),[ee,_,O,N]),ne=t.useRef(!1);o((function(){ne.current&&G({}),ne.current=!0}),[s]);var ue=t.useCallback((function(e,t){var r=(void 0===t?{}:t).align,n=void 0===r?"start":r,u=q.current,a=u.scrollOffset,i=u.outerSize;"auto"===n&&(n=e<=a?"start":e>=a+i?"end":"start"),"start"===n?k(e):"end"===n?k(e-i):"center"===n&&k(e-i/2)}),[k]),ae=t.useCallback((function(e,t){var n=void 0===t?{}:t,u=n.align,i=void 0===u?"auto":u,o=function(e,t){if(null==e)return{};var r,n,u={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(u[r]=e[r]);return u}(n,["align"]),c=q.current,s=c.measurements,f=c.scrollOffset,l=c.outerSize,v=s[Math.max(0,Math.min(e,a-1))];if(v){if("auto"===i)if(v.end>=f+l)i="end";else{if(!(v.start<=f))return;i="start"}var d="center"===i?v.start+v.size/2:"end"===i?v.end:v.start;ue(d,r({align:i},o))}}),[ue,a]),ie=t.useCallback((function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];ae.apply(void 0,t),requestAnimationFrame((function(){ae.apply(void 0,t)}))}),[ae]);return{virtualItems:re,totalSize:Q,scrollToOffset:ue,scrollToIndex:ie,measure:J}},Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=react-virtual.production.min.js.map
