{"version":3,"file":"overflow-menu.js","sourceRoot":"","sources":["../../../../../src/top-navigation/1.0-beta/parts/overflow-menu.tsx"],"names":[],"mappings":"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","sourcesContent":["// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport React from 'react';\n\nimport { TopNavigationProps } from '../interfaces';\nimport MenuDropdown from '../../../internal/components/menu-dropdown';\nimport { BaseComponentProps } from '../../../internal/base-component';\nimport { ButtonDropdownProps } from '../../../button-dropdown/interfaces';\nimport { fireCancelableEvent } from '../../../internal/events';\nimport styles from '../styles.css.js';\n\nexport interface OverflowMenuProps extends BaseComponentProps {\n  utilities: ReadonlyArray<TopNavigationProps.Utility>;\n\n  isNarrowViewport?: boolean;\n\n  /**\n   * Text displayed in the button dropdown trigger.\n   * @displayname text\n   */\n  children?: React.ReactNode;\n}\n\nfunction transformButtonDropdownItems(items: ButtonDropdownProps.Items, index: number): ButtonDropdownProps.Items {\n  return items.map(item => {\n    const itemCopy = { ...item, id: `${index}__${item.id || ''}` };\n    if ('items' in itemCopy) {\n      itemCopy.items = transformButtonDropdownItems(itemCopy.items, index);\n    }\n    return itemCopy;\n  });\n}\n\nexport function transformUtility(utility: TopNavigationProps.Utility, index: number): ButtonDropdownProps.ItemOrGroup {\n  const title = utility.title || utility.text || '';\n\n  const commonProps: Partial<ButtonDropdownProps.ItemOrGroup> = {\n    // Encode index into the ID, so we can pick out the right handler.\n    id: `${index}__`,\n    text: title,\n    iconName: utility.iconName,\n    iconUrl: utility.iconUrl,\n    iconAlt: utility.iconAlt,\n    iconSvg: utility.iconSvg,\n  };\n\n  if (utility.type === 'menu-dropdown') {\n    return {\n      ...commonProps,\n      items: transformButtonDropdownItems(utility.items, index),\n      description: utility.description,\n    } as ButtonDropdownProps.ItemGroup;\n  } else {\n    return {\n      ...commonProps,\n      href: utility.href,\n      external: utility.external,\n      externalIconAriaLabel: utility.externalIconAriaLabel,\n    } as ButtonDropdownProps.Item;\n  }\n}\n\nexport default function OverflowMenu({ children, utilities, isNarrowViewport }: OverflowMenuProps) {\n  const onClick = (isFollow: boolean, event: CustomEvent<ButtonDropdownProps.ItemClickDetails>) => {\n    const [index, ...rest] = event.detail.id.split('__');\n    const utility = utilities[parseInt(index)];\n    let defaultPrevented = false;\n    if ('onItemClick' in utility) {\n      defaultPrevented = fireCancelableEvent(utility.onItemClick, { ...event.detail, id: rest.join('__') });\n    } else if ('onClick' in utility && (isFollow || !utility.href)) {\n      // eslint-disable-next-line @typescript-eslint/no-unused-vars\n      const { id, ...baseNavigationalDetail } = event.detail;\n      defaultPrevented = fireCancelableEvent(utility.onClick, baseNavigationalDetail);\n    }\n    if (defaultPrevented) {\n      event.preventDefault();\n    }\n  };\n\n  return (\n    <MenuDropdown\n      items={utilities.map(transformUtility)}\n      offsetRight={isNarrowViewport ? 'l' : 'xxl'}\n      className={styles.trigger}\n      expandableGroups={true}\n      onItemClick={onClick.bind(null, false)}\n      onItemFollow={onClick.bind(null, true)}\n    >\n      {children}\n    </MenuDropdown>\n  );\n}\n"]}