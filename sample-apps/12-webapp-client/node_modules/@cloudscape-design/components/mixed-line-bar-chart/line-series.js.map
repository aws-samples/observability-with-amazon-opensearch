{"version":3,"file":"line-series.js","sourceRoot":"","sources":["../../../src/mixed-line-bar-chart/line-series.tsx"],"names":[],"mappings":";AAAA,qEAAqE;AACrE,sCAAsC;AACtC,OAAO,KAAK,MAAM,OAAO,CAAC;AAE1B,OAAO,EAAE,IAAI,EAAE,MAAM,UAAU,CAAC;AAgBhC,MAAM,CAAC,OAAO,UAAU,UAAU,CAAI,EAA8E;QAA5E,IAAI,UAAA,EAAE,MAAM,YAAA,EAAE,KAAK,WAAA,EAAE,MAAM,YAAA,EAAE,MAAM,YAAA,EAAE,iBAAiB,uBAAA;IAC5F,IAAM,WAAW,GAAG;QAClB,aAAa,EAAE,IAAI;QACnB,MAAM,EAAE,KAAK;QACb,QAAQ,EAAE,eAAQ,iBAAiB,MAAG;KACvC,CAAC;IAEF,8EAA8E;IAC9E,IAAI,MAAM,CAAC,IAAI,KAAK,MAAM,EAAE;QAC1B,IAAM,aAAa,GAAG,IAAI,EAAmC;aAC1D,CAAC,CAAC,UAAC,CAAkC;YACpC,IAAI,CAAC,GAAG,MAAM,CAAC,OAAO,CAAC,CAAC,CAAC,CAAQ,CAAC,IAAI,CAAC,CAAC;YACxC,IAAI,MAAM,CAAC,aAAa,EAAE,EAAE;gBAC1B,IAAM,MAAM,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,MAAM,CAAC,OAAO,CAAC,SAAS,EAAE,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;gBAC/D,CAAC,IAAI,MAAM,CAAC;aACb;YACD,OAAO,CAAC,CAAC;QACX,CAAC,CAAC;aACD,CAAC,CAAC,UAAC,CAAkC,IAAK,OAAA,MAAM,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,EAAxB,CAAwB,CAAC,CAAC;QAEvE,qDAAqD;QACrD,IAAM,WAAW,GAAG,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,UAAC,EAAK;gBAAH,CAAC,OAAA;YAAO,OAAA,MAAM,CAAC,OAAO,CAAC,CAAQ,CAAC,KAAK,SAAS;QAAtC,CAAsC,CAAC,CAAC;QAE1F,OAAO,CACL,yCACM,WAAW,IACf,CAAC,EAAE,aAAa,CAAC,WAAgE,CAAC,IAAI,EAAE,IACxF,CACH,CAAC;KACH;SAAM;QACL,IAAM,KAAK,GAAG,MAAM,CAAC,OAAO,CAAC,KAAK,EAAE,CAAC;QACrC,IAAM,CAAC,GAAG,MAAM,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;QACnC,IAAM,WAAW,GACf,IAAI,KAAK,GAAG,CAAC,CAAC,CAAC,EAAE,EAAE,EAAE,KAAK,CAAC,CAAC,CAAC,EAAE,EAAE,EAAE,KAAK,CAAC,CAAC,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,KAAK,CAAC,CAAC,CAAC,EAAE,EAAE,EAAE,KAAK,CAAC,CAAC,CAAC,EAAE,CAAC;QAC7G,OAAO,yCAAU,WAAW,EAAM,WAAW,EAAI,CAAC;KACnD;AACH,CAAC","sourcesContent":["// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport React from 'react';\n\nimport { line } from 'd3-shape';\n\nimport { ChartScale, NumericChartScale } from '../internal/components/cartesian-chart/scales';\nimport { MixedLineBarChartProps } from './interfaces';\n\nexport interface LineSeriesProps<T> {\n  axis: 'x' | 'y';\n  series: MixedLineBarChartProps.LineDataSeries<T> | MixedLineBarChartProps.ThresholdSeries;\n\n  color: string;\n  chartAreaClipPath: string;\n\n  xScale: ChartScale;\n  yScale: NumericChartScale;\n}\n\nexport default function LineSeries<T>({ axis, series, color, xScale, yScale, chartAreaClipPath }: LineSeriesProps<T>) {\n  const commonProps = {\n    'aria-hidden': true,\n    stroke: color,\n    clipPath: `url(#${chartAreaClipPath})`,\n  };\n\n  // Ignore axis for line series as we only support horizontally-oriented lines.\n  if (series.type === 'line') {\n    const lineGenerator = line<MixedLineBarChartProps.Datum<T>>()\n      .x((d: MixedLineBarChartProps.Datum<T>) => {\n        let x = xScale.d3Scale(d.x as any) || 0;\n        if (xScale.isCategorical()) {\n          const offset = Math.max(0, xScale.d3Scale.bandwidth() - 1) / 2;\n          x += offset;\n        }\n        return x;\n      })\n      .y((d: MixedLineBarChartProps.Datum<T>) => yScale.d3Scale(d.y) || 0);\n\n    // Filter out any data that is not part of the xScale\n    const visibleData = series.data.filter(({ x }) => xScale.d3Scale(x as any) !== undefined);\n\n    return (\n      <path\n        {...commonProps}\n        d={lineGenerator(visibleData as unknown as Array<MixedLineBarChartProps.Datum<T>>) || ''}\n      />\n    );\n  } else {\n    const range = xScale.d3Scale.range();\n    const y = yScale.d3Scale(series.y);\n    const coordinates =\n      axis === 'x' ? { x1: range[0], x2: range[1], y1: y, y2: y } : { x1: y, x2: y, y1: range[0], y2: range[1] };\n    return <line {...commonProps} {...coordinates} />;\n  }\n}\n"]}