{"version":3,"file":"internal.js","sourceRoot":"","sources":["../../../src/autosuggest/internal.tsx"],"names":[],"mappings":"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","sourcesContent":["// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport clsx from 'clsx';\nimport React, { Ref, useCallback, useEffect, useRef, useState } from 'react';\n\nimport {\n  useAutosuggestItems,\n  useFilteredItems,\n  useKeyboardHandler,\n  useSelectVisibleOption,\n  useHighlightVisibleOption,\n  getParentGroup,\n} from './controller';\nimport { useDropdownA11yProps } from './hooks/a11y';\nimport { AutosuggestItem, AutosuggestProps } from './interfaces';\nimport VirtualList from './virtual-list';\nimport PlainList from './plain-list';\n\nimport Dropdown from '../internal/components/dropdown';\nimport { useDropdownStatus } from '../internal/components/dropdown-status';\nimport DropdownFooter from '../internal/components/dropdown-footer';\n\nimport { useFormFieldContext } from '../internal/context/form-field-context';\nimport { getBaseProps } from '../internal/base-component';\nimport { useUniqueId } from '../internal/hooks/use-unique-id';\nimport useForwardFocus from '../internal/hooks/forward-focus';\nimport { fireNonCancelableEvent, CancelableEventHandler } from '../internal/events';\nimport { createHighlightedOptionHook } from '../internal/components/options-list/utils/use-highlight-option';\nimport InternalInput from '../input/internal';\nimport { InputProps } from '../input/interfaces';\nimport styles from './styles.css.js';\nimport { checkOptionValueField } from '../select/utils/check-option-value-field';\nimport checkControlled from '../internal/hooks/check-controlled';\nimport { fireCancelableEvent } from '../internal/events/index';\nimport { InternalBaseComponentProps } from '../internal/hooks/use-base-component';\nimport { useAnnouncement } from '../select/utils/use-announcement';\nimport { OptionGroup } from '../internal/components/option/interfaces';\nimport TabTrap from '../internal/components/tab-trap';\n\nexport interface InternalAutosuggestProps extends AutosuggestProps, InternalBaseComponentProps {\n  __filterText?: string;\n  __dropdownWidth?: number;\n  __onOptionClick?: CancelableEventHandler<AutosuggestProps.Option>;\n  __disableShowAll?: boolean;\n  __hideEnteredTextOption?: boolean;\n  __onOpen?: CancelableEventHandler<null>;\n}\n\nconst isInteractive = (option?: AutosuggestItem) => {\n  return !!option && !option.disabled && option.type !== 'parent';\n};\n\nconst isHighlightable = (option?: AutosuggestItem) => {\n  return !!option && option.type !== 'parent';\n};\n\nconst useHighlightedOption = createHighlightedOptionHook({ isHighlightable: isHighlightable });\n\nconst createMouseEventHandler =\n  (handler: (index: number) => void, usingMouse: React.MutableRefObject<boolean>) => (itemIndex: number) => {\n    // prevent mouse events to avoid losing focus from the input\n    usingMouse.current = true;\n    if (itemIndex > -1) {\n      handler(itemIndex);\n    }\n  };\n\nconst useLoadMoreItems = (onLoadItems: AutosuggestProps['onLoadItems']) => {\n  const lastFilteringText = useRef<string | null>(null);\n  return useCallback(\n    (firstPage: boolean, samePage: boolean, filteringText?: string) => {\n      if (samePage || !firstPage || filteringText === undefined || lastFilteringText.current !== filteringText) {\n        if (filteringText !== undefined) {\n          lastFilteringText.current = filteringText;\n        }\n        if (lastFilteringText.current !== null && onLoadItems) {\n          fireNonCancelableEvent(onLoadItems, { filteringText: lastFilteringText.current, firstPage, samePage });\n        }\n      }\n    },\n    [onLoadItems]\n  );\n};\n\nconst InternalAutosuggest = React.forwardRef((props: InternalAutosuggestProps, ref: Ref<InputProps.Ref>) => {\n  const {\n    value,\n    onChange,\n    onBlur,\n    onFocus,\n    onKeyUp,\n    onLoadItems,\n    options,\n    filteringType = 'auto',\n    statusType = 'finished',\n    placeholder,\n    name,\n    disabled,\n    disableBrowserAutocorrect = false,\n    autoFocus,\n    readOnly,\n    ariaLabel,\n    ariaRequired,\n    enteredTextLabel,\n    onKeyDown,\n    virtualScroll,\n    expandToViewport,\n    onSelect,\n    selectedAriaLabel,\n    renderHighlightedAriaLive,\n    __dropdownWidth,\n    __onOptionClick,\n    __disableShowAll,\n    __hideEnteredTextOption,\n    __onOpen,\n    __internalRootRef,\n    ...rest\n  } = props;\n  let { __filterText: filterText } = rest;\n  filterText = filterText === undefined ? value : filterText;\n\n  checkControlled('Autosuggest', 'value', value, 'onChange', onChange);\n  checkOptionValueField('Autosuggest', 'options', options);\n\n  const usingMouse = useRef(true);\n  const [showAll, setShowAll] = useState(false);\n  const [open, setOpen] = useState(false);\n  const autosuggestItems = useAutosuggestItems(options);\n  const filteredItems = useFilteredItems(\n    autosuggestItems,\n    value,\n    filterText,\n    filteringType,\n    showAll,\n    __hideEnteredTextOption\n  );\n  const openDropdown = () => !readOnly && setOpen(true);\n  const scrollToIndex = useRef<(index: number) => void>(null);\n  const { highlightedOption, highlightedIndex, moveHighlight, resetHighlight, setHighlightedIndex } =\n    useHighlightedOption(filteredItems);\n  const closeDropdown = () => {\n    setOpen(false);\n    resetHighlight();\n  };\n  const handleBlur: React.FocusEventHandler = event => {\n    if (event.currentTarget.contains(event.relatedTarget) || dropdownFooterRef.current?.contains(event.relatedTarget)) {\n      return;\n    }\n    closeDropdown();\n    fireNonCancelableEvent(onBlur);\n  };\n  const selectOption = (option: AutosuggestItem) => {\n    const value = option.value || '';\n    fireNonCancelableEvent(onChange, { value });\n    const selectedCancelled = fireCancelableEvent(__onOptionClick, option);\n    if (!selectedCancelled) {\n      closeDropdown();\n    } else {\n      resetHighlight();\n    }\n    fireNonCancelableEvent(onSelect, { value });\n  };\n  const selectHighlighted = () => {\n    if (highlightedOption) {\n      if (isInteractive(highlightedOption)) {\n        selectOption(highlightedOption);\n      }\n    } else {\n      closeDropdown();\n    }\n  };\n\n  const fireLoadMore = useLoadMoreItems(onLoadItems);\n\n  const handleInputChange: InputProps['onChange'] = e => {\n    openDropdown();\n    setShowAll(false);\n    resetHighlight();\n    onChange && onChange(e);\n  };\n\n  const highlightVisibleOption = useHighlightVisibleOption(filteredItems, setHighlightedIndex, isHighlightable);\n  const selectVisibleOption = useSelectVisibleOption(filteredItems, selectOption, isInteractive);\n  const handleMouseUp = createMouseEventHandler(selectVisibleOption, usingMouse);\n  const handleMouseMove = createMouseEventHandler(highlightVisibleOption, usingMouse);\n  const handleKeyDown = useKeyboardHandler(moveHighlight, openDropdown, selectHighlighted, usingMouse, open, onKeyDown);\n  const handleLoadMore = useCallback(() => {\n    options && options.length && statusType === 'pending' && fireLoadMore(false, false);\n  }, [fireLoadMore, options, statusType]);\n  const handleRecoveryClick = useCallback(() => {\n    fireLoadMore(false, true);\n    inputRef.current?.focus();\n  }, [fireLoadMore]);\n\n  const formFieldContext = useFormFieldContext(rest);\n  const baseProps = getBaseProps(rest);\n  const inputRef = useRef<HTMLInputElement>(null);\n  const dropdownFooterRef = useRef<HTMLDivElement>(null);\n  useForwardFocus(ref, inputRef);\n\n  const selfControlId = useUniqueId('input');\n  const controlId = formFieldContext.controlId ?? selfControlId;\n  const dropdownId = useUniqueId('dropdown');\n  const listId = useUniqueId('list');\n\n  // From an a11y point of view we only count the dropdown as 'expanded' if there are items that a user can dropdown into\n  const expanded = open && filteredItems.length > 1;\n  const [inputA11yProps, highlightedA11yProps] = useDropdownA11yProps(listId, expanded, ariaLabel, highlightedOption);\n\n  const nativeAttributes = {\n    name,\n    placeholder,\n    autoFocus,\n    onClick: openDropdown,\n    ...inputA11yProps,\n  };\n  const handleInputFocus: InputProps['onFocus'] = e => {\n    !__disableShowAll && setShowAll(true);\n    const openPrevented = fireCancelableEvent(__onOpen, null);\n    if (!openPrevented) {\n      openDropdown();\n      fireLoadMore(true, false, '');\n    }\n    onFocus?.(e);\n  };\n\n  useEffect(() => {\n    scrollToIndex.current?.(highlightedIndex);\n  }, [highlightedIndex]);\n\n  const isEmpty = !value && !filteredItems.length;\n  const showRecoveryLink = open && statusType === 'error' && props.recoveryText;\n  const dropdownStatus = useDropdownStatus({ ...props, isEmpty, onRecoveryClick: handleRecoveryClick });\n  const ListComponent = virtualScroll ? VirtualList : PlainList;\n\n  const handleMouseDown = (event: React.MouseEvent) => {\n    // prevent currently focused element from losing it\n    event.preventDefault();\n  };\n\n  const announcement = useAnnouncement({\n    announceSelected: true,\n    highlightedOption,\n    getParent: option => getParentGroup(option)?.option as undefined | OptionGroup,\n    selectedAriaLabel,\n    renderHighlightedAriaLive,\n  });\n\n  return (\n    <div {...baseProps} className={clsx(styles.root, baseProps.className)} ref={__internalRootRef} onBlur={handleBlur}>\n      <Dropdown\n        minWidth={__dropdownWidth}\n        stretchWidth={!__dropdownWidth}\n        trigger={\n          <>\n            <InternalInput\n              type=\"search\"\n              value={value}\n              onChange={handleInputChange}\n              __onDelayedInput={event => fireLoadMore(true, false, event.detail.value)}\n              onFocus={handleInputFocus}\n              onKeyDown={handleKeyDown}\n              onKeyUp={onKeyUp}\n              disabled={disabled}\n              disableBrowserAutocorrect={disableBrowserAutocorrect}\n              readOnly={readOnly}\n              ariaRequired={ariaRequired}\n              ref={inputRef}\n              autoComplete={false}\n              __nativeAttributes={nativeAttributes}\n              {...formFieldContext}\n              controlId={controlId}\n            />\n            <TabTrap\n              focusNextCallback={() => dropdownStatus.focusRecoveryLink()}\n              disabled={!open || !showRecoveryLink}\n            />\n          </>\n        }\n        onMouseDown={handleMouseDown}\n        open={open}\n        dropdownId={dropdownId}\n        footer={\n          dropdownStatus.isSticky ? (\n            <div ref={dropdownFooterRef} className={styles['dropdown-footer']}>\n              <TabTrap focusNextCallback={() => inputRef.current?.focus()} disabled={!showRecoveryLink} />\n              <DropdownFooter content={dropdownStatus.content} hasItems={filteredItems.length >= 1} />\n              <TabTrap focusNextCallback={() => inputRef.current?.focus()} disabled={!showRecoveryLink} />\n            </div>\n          ) : null\n        }\n        expandToViewport={expandToViewport}\n        hasContent={filteredItems.length >= 1 || dropdownStatus.content !== null}\n      >\n        {open && (\n          <ListComponent\n            listBottom={!dropdownStatus.isSticky ? <DropdownFooter content={dropdownStatus.content} /> : null}\n            handleLoadMore={handleLoadMore}\n            filteredItems={filteredItems}\n            highlightText={filterText}\n            usingMouse={usingMouse}\n            highlightedOption={highlightedOption}\n            enteredTextLabel={enteredTextLabel}\n            ref={scrollToIndex}\n            highlightedA11yProps={highlightedA11yProps}\n            hasDropdownStatus={dropdownStatus.content !== null}\n            menuProps={{\n              id: listId,\n              onMouseUp: handleMouseUp,\n              onMouseMove: handleMouseMove,\n              ariaLabelledby: controlId,\n            }}\n            screenReaderContent={announcement}\n          />\n        )}\n      </Dropdown>\n    </div>\n  );\n});\n\nexport default InternalAutosuggest;\n"]}