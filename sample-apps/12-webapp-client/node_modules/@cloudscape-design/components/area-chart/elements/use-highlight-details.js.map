{"version":3,"file":"use-highlight-details.js","sourceRoot":"","sources":["../../../../src/area-chart/elements/use-highlight-details.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { CartesianChartProps } from '../../internal/components/cartesian-chart/interfaces';\nimport { ChartSeriesDetailItem } from '../../internal/components/chart-series-details';\nimport { AreaChartProps } from '../interfaces';\nimport { ChartModel } from '../model';\nimport { useSelector } from '../model/async-store';\n\nexport interface HighlightDetails {\n  isPopoverPinned: boolean;\n  highlightIndex: number;\n  formattedX: string;\n  seriesTitle: string;\n  formattedY: number | string;\n  seriesDetails: readonly ChartSeriesDetailItem[];\n  totalDetails: readonly ChartSeriesDetailItem[];\n  pointDetails: null | ChartSeriesDetailItem;\n  activeLabel: string;\n}\n\nexport default function useHighlightDetails<T extends AreaChartProps.DataTypes>({\n  model,\n  xTickFormatter,\n  yTickFormatter,\n  detailTotalFormatter,\n  detailTotalLabel,\n}: {\n  model: ChartModel<T>;\n  xTickFormatter?: CartesianChartProps.TickFormatter<T>;\n  yTickFormatter?: CartesianChartProps.TickFormatter<number>;\n  detailTotalFormatter?: CartesianChartProps.TickFormatter<number>;\n  detailTotalLabel?: string;\n}): null | HighlightDetails {\n  const hX = useSelector(model.interactions, state => state.highlightedX);\n  const hPoint = useSelector(model.interactions, state => state.highlightedPoint);\n  const isPopoverPinned = useSelector(model.interactions, state => state.isPopoverPinned);\n\n  if (!hX) {\n    return null;\n  }\n\n  const [firstPoint] = hX;\n  const highlightIndex = firstPoint.index.x;\n  const seriesPoints = [...model.computed.plot.xs[highlightIndex]];\n  const detailsTotal = seriesPoints.reduce((total, point) => total + point.value, 0);\n  const formattedX = xTickFormatter ? xTickFormatter(firstPoint.x) : firstPoint.x.toString();\n  const seriesTitle = hPoint ? getInternalSeries(hPoint).title : '';\n  const formattedY = hPoint ? getInternalSeries(hPoint).formatValue(hPoint.value, hPoint.x) : '';\n  const seriesDetails = seriesPoints.map(point => {\n    const { title, formatValue, color, markerType } = getInternalSeries(point);\n    const isDimmed = Boolean(hPoint) && point !== hPoint;\n    return { key: title, value: formatValue(point.value, point.x), color, markerType, isDimmed };\n  });\n  const totalDetails = [\n    {\n      key: detailTotalLabel || '',\n      value: detailTotalFormatter\n        ? detailTotalFormatter(detailsTotal)\n        : yTickFormatter\n        ? yTickFormatter(detailsTotal)\n        : detailsTotal,\n    },\n  ];\n  const pointDetails = hPoint ? seriesDetails[hPoint.index.s] : null;\n  const activeLabel = `${seriesTitle} ${formattedX} ${formattedY}, ${totalDetails[0].key} ${totalDetails[0].value}`;\n\n  return {\n    isPopoverPinned,\n    highlightIndex,\n    formattedX,\n    seriesTitle,\n    formattedY,\n    activeLabel,\n    seriesDetails,\n    totalDetails,\n    pointDetails,\n  };\n\n  function getInternalSeries(point: ChartModel.PlotPoint<T>) {\n    return model.getInternalSeries(model.series[point.index.s]);\n  }\n}\n"]}