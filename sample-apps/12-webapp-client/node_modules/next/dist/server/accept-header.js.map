{"version":3,"sources":["../../server/accept-header.ts"],"names":["acceptLanguage","header","preferences","parse","type","prefixMatch","raw","options","lowers","Map","replace","pos","preference","lower","toLowerCase","set","orig","parts","split","pop","length","joined","join","has","selections","map","Set","i","part","params","Error","token","selection","q","pref","get","add","key","value","score","parseFloat","Number","isFinite","push","sort","a","b","undefined","values","preferred"],"mappings":"AAAA;;;;QAAgBA,cAAc,GAAdA,cAAc;AAAvB,SAASA,cAAc,CAACC,MAAM,GAAG,EAAE,EAAEC,WAAsB,EAAE;IAClE,OACEC,KAAK,CAACF,MAAM,EAAEC,WAAW,EAAE;QACzBE,IAAI,EAAE,iBAAiB;QACvBC,WAAW,EAAE,IAAI;KAClB,CAAC,CAAC,CAAC,CAAC,IAAI,EAAE,CACZ;CACF;AAcD,SAASF,KAAK,CACZG,GAAW,EACXJ,WAAiC,EACjCK,OAAgB,EAChB;IACA,MAAMC,MAAM,GAAG,IAAIC,GAAG,EAAyC;IAC/D,MAAMR,MAAM,GAAGK,GAAG,CAACI,OAAO,WAAW,EAAE,CAAC;IAExC,IAAIR,WAAW,EAAE;QACf,IAAIS,GAAG,GAAG,CAAC;QACX,KAAK,MAAMC,UAAU,IAAIV,WAAW,CAAE;YACpC,MAAMW,KAAK,GAAGD,UAAU,CAACE,WAAW,EAAE;YACtCN,MAAM,CAACO,GAAG,CAACF,KAAK,EAAE;gBAAEG,IAAI,EAAEJ,UAAU;gBAAED,GAAG,EAAEA,GAAG,EAAE;aAAE,CAAC;YACnD,IAAIJ,OAAO,CAACF,WAAW,EAAE;gBACvB,MAAMY,KAAK,GAAGJ,KAAK,CAACK,KAAK,CAAC,GAAG,CAAC;gBAC9B,MAAQD,KAAK,CAACE,GAAG,EAAE,EAAEF,KAAK,CAACG,MAAM,GAAG,CAAC,CAAG;oBACtC,MAAMC,MAAM,GAAGJ,KAAK,CAACK,IAAI,CAAC,GAAG,CAAC;oBAC9B,IAAI,CAACd,MAAM,CAACe,GAAG,CAACF,MAAM,CAAC,EAAE;wBACvBb,MAAM,CAACO,GAAG,CAACM,MAAM,EAAE;4BAAEL,IAAI,EAAEJ,UAAU;4BAAED,GAAG,EAAEA,GAAG,EAAE;yBAAE,CAAC;qBACrD;iBACF;aACF;SACF;KACF;IAED,MAAMM,KAAK,GAAGhB,MAAM,CAACiB,KAAK,CAAC,GAAG,CAAC;IAC/B,MAAMM,UAAU,GAAgB,EAAE;IAClC,MAAMC,GAAG,GAAG,IAAIC,GAAG,EAAU;IAE7B,IAAK,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGV,KAAK,CAACG,MAAM,EAAE,EAAEO,CAAC,CAAE;QACrC,MAAMC,IAAI,GAAGX,KAAK,CAACU,CAAC,CAAC;QACrB,IAAI,CAACC,IAAI,EAAE;YACT,SAAQ;SACT;QAED,MAAMC,MAAM,GAAGD,IAAI,CAACV,KAAK,CAAC,GAAG,CAAC;QAC9B,IAAIW,MAAM,CAACT,MAAM,GAAG,CAAC,EAAE;YACrB,MAAM,IAAIU,KAAK,CAAC,CAAC,QAAQ,EAAEvB,OAAO,CAACH,IAAI,CAAC,OAAO,CAAC,CAAC,CAAA;SAClD;QAED,IAAI2B,KAAK,GAAGF,MAAM,CAAC,CAAC,CAAC,CAACf,WAAW,EAAE;QACnC,IAAI,CAACiB,KAAK,EAAE;YACV,MAAM,IAAID,KAAK,CAAC,CAAC,QAAQ,EAAEvB,OAAO,CAACH,IAAI,CAAC,OAAO,CAAC,CAAC,CAAA;SAClD;QAED,MAAM4B,SAAS,GAAc;YAAED,KAAK;YAAEpB,GAAG,EAAEgB,CAAC;YAAEM,CAAC,EAAE,CAAC;SAAE;QACpD,IAAI/B,WAAW,IAAIM,MAAM,CAACe,GAAG,CAACQ,KAAK,CAAC,EAAE;YACpCC,SAAS,CAACE,IAAI,GAAG1B,MAAM,CAAC2B,GAAG,CAACJ,KAAK,CAAC,CAAEpB,GAAG;SACxC;QAEDc,GAAG,CAACW,GAAG,CAACJ,SAAS,CAACD,KAAK,CAAC;QAExB,IAAIF,MAAM,CAACT,MAAM,KAAK,CAAC,EAAE;YACvB,MAAMa,CAAC,GAAGJ,MAAM,CAAC,CAAC,CAAC;YACnB,MAAM,CAACQ,GAAG,EAAEC,KAAK,CAAC,GAAGL,CAAC,CAACf,KAAK,CAAC,GAAG,CAAC;YAEjC,IAAI,CAACoB,KAAK,IAAKD,GAAG,KAAK,GAAG,IAAIA,GAAG,KAAK,GAAG,AAAC,EAAE;gBAC1C,MAAM,IAAIP,KAAK,CAAC,CAAC,QAAQ,EAAEvB,OAAO,CAACH,IAAI,CAAC,OAAO,CAAC,CAAC,CAAA;aAClD;YAED,MAAMmC,KAAK,GAAGC,UAAU,CAACF,KAAK,CAAC;YAC/B,IAAIC,KAAK,KAAK,CAAC,EAAE;gBACf,SAAQ;aACT;YAED,IAAIE,MAAM,CAACC,QAAQ,CAACH,KAAK,CAAC,IAAIA,KAAK,IAAI,CAAC,IAAIA,KAAK,IAAI,KAAK,EAAE;gBAC1DP,SAAS,CAACC,CAAC,GAAGM,KAAK;aACpB;SACF;QAEDf,UAAU,CAACmB,IAAI,CAACX,SAAS,CAAC;KAC3B;IAEDR,UAAU,CAACoB,IAAI,CAAC,CAACC,CAAC,EAAEC,CAAC,GAAK;QACxB,IAAIA,CAAC,CAACb,CAAC,KAAKY,CAAC,CAACZ,CAAC,EAAE;YACf,OAAOa,CAAC,CAACb,CAAC,GAAGY,CAAC,CAACZ,CAAC,CAAA;SACjB;QAED,IAAIa,CAAC,CAACZ,IAAI,KAAKW,CAAC,CAACX,IAAI,EAAE;YACrB,IAAIW,CAAC,CAACX,IAAI,KAAKa,SAAS,EAAE;gBACxB,OAAO,CAAC,CAAA;aACT;YAED,IAAID,CAAC,CAACZ,IAAI,KAAKa,SAAS,EAAE;gBACxB,OAAO,CAAC,CAAC,CAAA;aACV;YAED,OAAOF,CAAC,CAACX,IAAI,GAAGY,CAAC,CAACZ,IAAI,CAAA;SACvB;QAED,OAAOW,CAAC,CAAClC,GAAG,GAAGmC,CAAC,CAACnC,GAAG,CAAA;KACrB,CAAC;IAEF,MAAMqC,MAAM,GAAGxB,UAAU,CAACC,GAAG,CAAC,CAACO,SAAS,GAAKA,SAAS,CAACD,KAAK,CAAC;IAC7D,IAAI,CAAC7B,WAAW,IAAI,CAACA,WAAW,CAACkB,MAAM,EAAE;QACvC,OAAO4B,MAAM,CAAA;KACd;IAED,MAAMC,SAAS,GAAa,EAAE;IAC9B,KAAK,MAAMjB,UAAS,IAAIgB,MAAM,CAAE;QAC9B,IAAIhB,UAAS,KAAK,GAAG,EAAE;YACrB,KAAK,MAAM,CAACpB,UAAU,EAAE0B,KAAK,CAAC,IAAI9B,MAAM,CAAE;gBACxC,IAAI,CAACiB,GAAG,CAACF,GAAG,CAACX,UAAU,CAAC,EAAE;oBACxBqC,SAAS,CAACN,IAAI,CAACL,KAAK,CAACtB,IAAI,CAAC;iBAC3B;aACF;SACF,MAAM;YACL,MAAMH,KAAK,GAAGmB,UAAS,CAAClB,WAAW,EAAE;YACrC,IAAIN,MAAM,CAACe,GAAG,CAACV,KAAK,CAAC,EAAE;gBACrBoC,SAAS,CAACN,IAAI,CAACnC,MAAM,CAAC2B,GAAG,CAACtB,KAAK,CAAC,CAAEG,IAAI,CAAC;aACxC;SACF;KACF;IAED,OAAOiC,SAAS,CAAA;CACjB"}