{"version":3,"sources":["../../../../server/web/spec-extension/cookies.ts"],"names":["CookieSerializeOptions","normalizeCookieOptions","options","Object","assign","maxAge","expires","Date","now","path","serializeValue","value","JSON","stringify","String","serializeExpiredCookie","key","cookie","serialize","deserializeCookie","input","headers","get","undefined","split","serializeCookie","join","Cookies","Map","constructor","parsedInput","parse","entries","set","NextCookies","response","args","getWithOptions","raw","isAlreadyAdded","has","currentCookie","Error","setCookie","filter","startsWith","append","delete","isDeleted","expiredCookie","clear","expiredCookies","Array","from","keys","map"],"mappings":"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"}