{"version":3,"sources":["../../server/server-route-utils.ts"],"names":["getCustomRoute","params","rule","type","restrictedRedirectPaths","match","getPathMatch","source","strict","removeUnnamedParams","regexModifier","internal","regex","modifyRouteRegex","undefined","name","fn","_req","_res","_params","_parsedUrl","finished","createHeaderRoute","headerRoute","matchesBasePath","matchesLocale","matchesLocaleAPIRoutes","matchesTrailingSlash","has","res","hasParams","Object","keys","length","header","headers","key","value","compileNonPath","setHeader","createRedirectRoute","redirectRoute","statusCode","req","parsedUrl","parsedDestination","prepareDestination","appendParamsToQuery","destination","query","search","stringifyQuery","updatedDestination","formatUrl","startsWith","normalizeRepeatedSlashes","redirect","getRedirectStatus","body","send","initialQuery","getRequestMeta","initialQueryValues","values","stringifyQs","encodeURIComponent","some","initialQueryVal","Array","isArray","includes"],"mappings":"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"}